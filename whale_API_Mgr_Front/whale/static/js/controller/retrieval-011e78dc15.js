whaleModule.controller("retrievalController",["$scope","$rootScope","$window","$http","$interval","$location","$timeout","$state",function(e,t,r,i,a,n,s,l){$(function(){$("#Top").hide(),$(function(){$(window).scroll(function(){$(window).scrollTop()>100?$("#Top").fadeIn():$("#Top").fadeOut()}),$("#Top").click(function(){return $("body,html").animate({scrollTop:0},500),!1})})}),e.initData={serviceName:"''",token:"",level:"''"},i.get("/whale_alarm/getType").success(function(t){10200==t.code&&(e.names=t.data)}),laydate.skin("molv"),laydate({elem:"#starttime",format:"YYYY-MM-DD hh:mm:ss",festival:!0,istime:!0}),laydate({elem:"#endtime",format:"YYYY-MM-DD hh:mm:ss",festival:!0,istime:!0}),e.result={starttime:"",endtime:""},whale.removestore("starttime"),whale.removestore("endtime"),e.shuaxin=function(){e.result.starttime=$("#starttime").val(),e.result.endtime=$("#endtime").val();var r=new Date(e.result.starttime).getTime(),i=new Date(e.result.endtime).getTime();if(""==e.result.starttime&&""==e.result.endtime&&(r="",i=""),""==e.result.starttime&&""!==e.result.endtime||""!==e.result.starttime&&""==e.result.endtime)return t.errormsg="请选择开始时间或结束时间",void s(function(){t.errormsg=null},1500);if(i-r<0)return t.errormsg="结束时间应该大于开始时间",void s(function(){t.errormsg=null},1500);var a,n;a="''"==e.initData.serviceName?"":e.initData.serviceName,n="''"==e.initData.level?"":e.initData.level,whale.store("starttime",r),whale.store("endtime",i),whale.store("serviceName",a),whale.store("token",e.initData.token),whale.store("level",n),e.$broadcast("sendParent_history","")},e.renderFinish1flag=!0,e.renderFinish1=function(){0!=e.renderFinish1flag&&(whale.store("serviceName",""),whale.store("token",""),whale.store("starttime",""),whale.store("endtime",""),whale.store("level",""),e.$broadcast("sendParent_history",""),e.renderFinish1flag=!1)}}]);